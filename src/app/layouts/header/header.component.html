<header class="bg-white border-b border-gray-100 sticky top-0 z-50">
  <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between h-14">

      <!-- Logo -->
      <div class="flex items-center">
        <a routerLink="/" class="flex items-center gap-2">
          <div class="w-8 h-8 bg-gray-900 rounded-lg flex items-center justify-center">
            <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.5 21v-7.5a.75.75 0 01.75-.75h3a.75.75 0 01.75.75V21m-4.5 0H2.36m11.14 0H18m0 0h3.64m-1.39 0V9.349m-16.5 11.65V9.35m0 0a3.001 3.001 0 003.75-.615A2.993 2.993 0 009.75 9.75c.896 0 1.7-.393 2.25-1.016a2.993 2.993 0 002.25 1.016c.896 0 1.7-.393 2.25-1.016a3.001 3.001 0 003.75.614m-16.5 0a3.004 3.004 0 01-.621-4.72L4.318 3.44A1.5 1.5 0 015.378 3h13.243a1.5 1.5 0 011.06.44l1.19 1.189a3 3 0 01-.621 4.72"/>
            </svg>
          </div>
          <span class="text-sm font-bold text-gray-900 hidden sm:block">Centre Commercial</span>
        </a>
      </div>

      <!-- Desktop Navigation -->
      @if (authService.isAuthenticated()) {
        <div class="hidden md:flex md:items-center md:gap-1">

          <!-- Admin Menu -->
          @if (authService.isAdmin()) {
            <a routerLink="/admin/dashboard" routerLinkActive="bg-gray-100 text-gray-900"
               class="px-3 py-1.5 rounded-lg text-xs font-medium text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-colors">
              Dashboard
            </a>
            <a routerLink="/admin/boutiques" routerLinkActive="bg-gray-100 text-gray-900"
               class="px-3 py-1.5 rounded-lg text-xs font-medium text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-colors">
              Boutiques
            </a>
            <a routerLink="/admin/zones" routerLinkActive="bg-gray-100 text-gray-900"
               class="px-3 py-1.5 rounded-lg text-xs font-medium text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-colors">
              Zones
            </a>
            <a routerLink="/admin/loyers" routerLinkActive="bg-gray-100 text-gray-900"
               class="px-3 py-1.5 rounded-lg text-xs font-medium text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-colors">
              Loyers
            </a>
            <a routerLink="/admin/paiements" routerLinkActive="bg-gray-100 text-gray-900"
               class="px-3 py-1.5 rounded-lg text-xs font-medium text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-colors">
              Paiements
            </a>
            <a routerLink="/admin/users" routerLinkActive="bg-gray-100 text-gray-900"
               class="px-3 py-1.5 rounded-lg text-xs font-medium text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-colors">
              Utilisateurs
            </a>
            <a routerLink="/admin/centre" routerLinkActive="bg-gray-100 text-gray-900"
               class="px-3 py-1.5 rounded-lg text-xs font-medium text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-colors">
              Centre
            </a>
          }

          <!-- Merchant Menu -->
          @if (authService.isMerchant()) {
            <a routerLink="/merchant/dashboard" routerLinkActive="bg-gray-100 text-gray-900"
               class="px-3 py-1.5 rounded-lg text-xs font-medium text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-colors">
              Tableau de bord
            </a>
            <a routerLink="/merchant/boutiques" routerLinkActive="bg-gray-100 text-gray-900"
               class="px-3 py-1.5 rounded-lg text-xs font-medium text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-colors">
              Mes Boutiques
            </a>
            <a routerLink="/merchant/produits" routerLinkActive="bg-gray-100 text-gray-900"
               class="px-3 py-1.5 rounded-lg text-xs font-medium text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-colors">
              Produits
            </a>
            <a routerLink="/merchant/commandes" routerLinkActive="bg-gray-100 text-gray-900"
               class="px-3 py-1.5 rounded-lg text-xs font-medium text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-colors">
              Commandes
            </a>
            <a routerLink="/merchant/loyers" routerLinkActive="bg-gray-100 text-gray-900"
               class="px-3 py-1.5 rounded-lg text-xs font-medium text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-colors">
              Mes Loyers
            </a>
          }

          <!-- Client Menu -->
          @if (authService.isClient()) {
            <a routerLink="/client/catalogue" routerLinkActive="bg-gray-100 text-gray-900"
               class="px-3 py-1.5 rounded-lg text-xs font-medium text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-colors">
              Catalogue
            </a>
            <a routerLink="/boutiques" routerLinkActive="bg-gray-100 text-gray-900"
               class="px-3 py-1.5 rounded-lg text-xs font-medium text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-colors">
              Boutiques
            </a>
            <a routerLink="/client/panier" routerLinkActive="bg-gray-100 text-gray-900"
               class="px-3 py-1.5 rounded-lg text-xs font-medium text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-colors flex items-center gap-1">
              <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"/>
              </svg>
              Panier
            </a>
            <a routerLink="/client/commandes" routerLinkActive="bg-gray-100 text-gray-900"
               class="px-3 py-1.5 rounded-lg text-xs font-medium text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-colors">
              Commandes
            </a>
          }

          <!-- User Menu -->
          <div class="relative ml-2">
            <button (click)="toggleUserMenu()"
                    class="flex items-center gap-2 px-2 py-1.5 rounded-lg text-xs font-medium text-gray-500 hover:bg-gray-50 transition-colors">
              <div class="w-7 h-7 rounded-full bg-gray-900 text-white flex items-center justify-center text-[10px] font-semibold">
                {{ getUserInitials() }}
              </div>
              <span class="hidden lg:block text-gray-700">{{ authService.currentUser()?.prenom }}</span>
              <svg class="w-3 h-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
              </svg>
            </button>

            @if (userMenuOpen()) {
              <div class="absolute right-0 mt-1 w-44 bg-white rounded-xl border border-gray-100 shadow-lg overflow-hidden z-50">
                <a routerLink="/profile"
                   class="block px-4 py-2.5 text-xs font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors">
                  Mon profil
                </a>
                <button (click)="logout()"
                        class="block w-full text-left px-4 py-2.5 text-xs font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors border-t border-gray-50">
                  Déconnexion
                </button>
              </div>
            }
          </div>
        </div>
      } @else {
        <!-- Visitor -->
        <div class="hidden md:flex md:items-center md:gap-1">
          <a routerLink="/boutiques" routerLinkActive="bg-gray-100 text-gray-900"
             class="px-3 py-1.5 rounded-lg text-xs font-medium text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-colors">
            Boutiques
          </a>
          <a routerLink="/produits" routerLinkActive="bg-gray-100 text-gray-900"
             class="px-3 py-1.5 rounded-lg text-xs font-medium text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-colors">
            Produits
          </a>
          <a routerLink="/login"
             class="px-3 py-1.5 rounded-lg text-xs font-medium text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-colors">
            Connexion
          </a>
          <a routerLink="/register"
             class="px-4 py-1.5 bg-gray-900 text-white rounded-full text-xs font-medium hover:bg-gray-800 transition-colors">
            S'inscrire
          </a>
        </div>
      }

      <!-- Mobile menu button -->
      <div class="flex items-center md:hidden">
        <button (click)="toggleMobileMenu()"
                class="p-2 text-gray-500 hover:text-gray-900 hover:bg-gray-50 rounded-lg transition-colors">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            @if (mobileMenuOpen()) {
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
            } @else {
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
            }
          </svg>
        </button>
      </div>
    </div>
  </nav>

  <!-- Mobile menu -->
  @if (mobileMenuOpen()) {
    <div class="md:hidden border-t border-gray-100 bg-white">
      <div class="px-4 py-3 space-y-0.5">

        @if (authService.isAuthenticated()) {
          @if (authService.isAdmin()) {
            <a routerLink="/admin/dashboard" class="block px-3 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors">Dashboard</a>
            <a routerLink="/admin/boutiques" class="block px-3 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors">Boutiques</a>
            <a routerLink="/admin/zones" class="block px-3 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors">Zones</a>
            <a routerLink="/admin/loyers" class="block px-3 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors">Loyers</a>
            <a routerLink="/admin/paiements" class="block px-3 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors">Paiements</a>
            <a routerLink="/admin/users" class="block px-3 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors">Utilisateurs</a>
            <a routerLink="/admin/centre" class="block px-3 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors">Centre</a>
          }
          @if (authService.isMerchant()) {
            <a routerLink="/merchant/dashboard" class="block px-3 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors">Tableau de bord</a>
            <a routerLink="/merchant/boutiques" class="block px-3 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors">Mes Boutiques</a>
            <a routerLink="/merchant/produits" class="block px-3 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors">Produits</a>
            <a routerLink="/merchant/commandes" class="block px-3 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors">Commandes</a>
            <a routerLink="/merchant/loyers" class="block px-3 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors">Mes Loyers</a>
          }
          @if (authService.isClient()) {
            <a routerLink="/client/catalogue" class="block px-3 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors">Catalogue</a>
            <a routerLink="/boutiques" class="block px-3 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors">Boutiques</a>
            <a routerLink="/client/panier" class="block px-3 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors">Panier</a>
            <a routerLink="/client/commandes" class="block px-3 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors">Commandes</a>
          }

          <!-- User info mobile -->
          <div class="border-t border-gray-100 mt-2 pt-3">
            <div class="px-3 mb-2">
              <p class="text-sm font-semibold text-gray-900">{{ authService.currentUser()?.nom }} {{ authService.currentUser()?.prenom }}</p>
              <p class="text-xs text-gray-400">{{ authService.currentUser()?.email }}</p>
            </div>
            <a routerLink="/profile" class="block px-3 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors">Mon profil</a>
            <button (click)="logout()" class="block w-full text-left px-3 py-2.5 rounded-lg text-sm font-medium text-red-500 hover:bg-red-50 transition-colors">Déconnexion</button>
          </div>
        } @else {
          <a routerLink="/boutiques" class="block px-3 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors">Boutiques</a>
          <a routerLink="/produits" class="block px-3 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors">Produits</a>
          <div class="border-t border-gray-100 mt-2 pt-3 flex gap-2">
            <a routerLink="/login" class="flex-1 py-2.5 text-center text-sm font-medium text-gray-700 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors">Connexion</a>
            <a routerLink="/register" class="flex-1 py-2.5 text-center text-sm font-medium text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition-colors">S'inscrire</a>
          </div>
        }
      </div>
    </div>
  }
</header>
